
export type LanguageLevel = "A0" | "A1" | "A2" | "B1" | "B2" | "C1" | "C2";

export const ALL_LEVELS: LanguageLevel[] = ["A0", "A1", "A2", "B1", "B2", "C1", "C2"];

export type ModuleType = "vocabulary" | "grammar" | "listening" | "reading" | "writing" | "wordTest";

export const ALL_MODULE_TYPES: ModuleType[] = ["vocabulary", "grammar", "listening", "reading", "writing", "wordTest"];
export const MODULE_NAMES_RU: Record<ModuleType, string> = {
  vocabulary: "Лексика",
  grammar: "Грамматика",
  listening: "Аудирование",
  reading: "Чтение",
  writing: "Письмо",
  wordTest: "Тест по словам"
};

export interface VocabularyWord {
  id: string;
  german: string;
  russian: string;
  topic: string;
  level: LanguageLevel;
  consecutiveCorrectAnswers: number;
  lastTestedDate?: string; // ISO date string
  errorCount: number;
  exampleSentence?: string; // Optional, can be generated by AI
}

export interface ModuleProgress {
  score: number | null; // Percentage
  completed: boolean;
  lastAttemptDate?: string; // ISO date string
  attempts: number;
}

export interface TopicProgress {
  id: string; // e.g., "greetings"
  name: string; // e.g., "Приветствия"
  modules: Partial<Record<ModuleType, ModuleProgress>>;
  completed: boolean;
  custom?: boolean; // True if user-defined topic
}

export interface LevelProgress {
  topics: Record<string, TopicProgress>; // Keyed by topic ID
  completed: boolean;
}

export interface UserProfile {
  name?: string;
  preferredTopics?: string[];
}

export interface UserSettings {
  notificationsEnabled: boolean;
  lastActivityTimestamp?: number; // Unix timestamp
  darkMode?: boolean;
}

export interface UserData {
  currentLevel: LanguageLevel;
  currentTopicId?: string; // ID of the current topic
  profile: UserProfile;
  progress: Partial<Record<LanguageLevel, LevelProgress>>;
  vocabularyBank: VocabularyWord[];
  settings: UserSettings;
  customTopics: TopicProgress[]; // For user-defined topics
}

// AI Generated Content Types (matches flows)
export interface AILessonVocabularyItem {
  german: string;
  russian: string;
  exampleSentence?: string;
}

export interface AILessonListeningExercise {
  script: string;
  questions: string[];
}

export interface AILessonContent {
  lessonTitle: string;
  vocabulary: AILessonVocabularyItem[];
  grammarExplanation: string;
  listeningExercise: AILessonListeningExercise;
  readingPassage: string;
  readingQuestions: string[]; // Added for specific reading comprehension questions
  writingPrompt: string;
}

export interface AIEvaluationResult {
  evaluation: string;
  isCorrect: boolean;
  suggestedCorrection?: string;
}

export interface AIRecommendedLesson {
  topic: string;
  modules: string[]; // Module types
  reasoning: string;
}

// Default Topics (example, should be expanded)
export const DEFAULT_TOPICS: Record<LanguageLevel, { id: string; name: string }[]> = {
  A0: [
    { id: "a0_greetings_farewells", name: "Основные приветствия и прощания" },
    { id: "a0_numbers_dates", name: "Числа и даты" },
    { id: "a0_family_friends", name: "Семья и друзья" },
    { id: "a0_colors", name: "Цвета" },
    { id: "a0_body_parts", name: "Части тела" },
    { id: "a0_home_objects", name: "Дом и предметы в доме" },
    { id: "a0_food_drinks", name: "Продукты питания и напитки" },
    { id: "a0_clothing", name: "Одежда" },
    { id: "a0_simple_motion_verbs", name: "Простые глаголы движения" },
    { id: "a0_simple_nouns_city_school", name: "Простые существительные (город, школа)" }
  ],
  A1: [
    { id: "a1_work_professions", name: "Работа и профессии" },
    { id: "a1_travel_transport", name: "Путешествия и транспорт" },
    { id: "a1_time_schedule", name: "Время и расписание" },
    { id: "a1_hobbies_interests", name: "Хобби и увлечения" },
    { id: "a1_shops_shopping", name: "Магазины и покупки" },
    { id: "a1_emotions_states", name: "Простые эмоции и состояния" },
    { id: "a1_simple_adjectives", name: "Простые прилагательные" }
  ],
  A2: [
    { id: "a2_health_medical_care", name: "Здоровье и медицинская помощь" },
    { id: "a2_weather_nature", name: "Погода и природа" },
    { id: "a2_education_studies", name: "Образование и учеба" },
    { id: "a2_relationships_family", name: "Отношения и семья (углубл.)" },
    { id: "a2_city_surroundings", name: "Город и окрестности" },
    { id: "a2_simple_phrasal_verbs", name: "Простые фразовые глаголы" }
  ],
  B1: [
    { id: "b1_work_career", name: "Работа и карьера" },
    { id: "b1_travel_culture", name: "Путешествия и культура" },
    { id: "b1_politics_society", name: "Политика и общество" },
    { id: "b1_technology", name: "Технологии" },
    { id: "b1_ecology_environment", name: "Экология и окружающая среда" },
    { id: "b1_holidays_traditions", name: "Праздники и традиции" }
  ],
  B2: [
    { id: "b2_science_technology", name: "Наука и техника" },
    { id: "b2_art_culture", name: "Искусство и культура" },
    { id: "b2_education_science", name: "Образование и наука" },
    { id: "b2_politics_economics", name: "Политика и экономика" },
    { id: "b2_social_issues", name: "Социальные проблемы" }
  ],
  C1: [
    { id: "c1_abstract_topics", name: "Абстрактные темы" },
    { id: "c1_professional_vocabulary", name: "Профессиональная лексика" },
    { id: "c1_discussion_topics", name: "Дискуссионные темы" },
    { id: "c1_philosophy_psychology", name: "Философия и психология" }
  ],
  C2: [
    { id: "c2_expert_terminology", name: "Экспертная терминология" },
    { id: "c2_rare_stylized_expressions", name: "Редкие и высоко стилизованные выражения" },
    { id: "c2_cultural_historical_references", name: "Культурные и исторические ссылки" }
  ],
};
