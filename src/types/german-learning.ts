
export type LanguageLevel = "A0" | "A1" | "A2" | "B1" | "B2" | "C1" | "C2";

export const ALL_LEVELS: LanguageLevel[] = ["A0", "A1", "A2", "B1", "B2", "C1", "C2"];

export type ModuleType = "vocabulary" | "grammar" | "listening" | "reading" | "writing" | "wordTest";

export const ALL_MODULE_TYPES: ModuleType[] = ["vocabulary", "grammar", "listening", "reading", "writing", "wordTest"];
export const MODULE_NAMES_RU: Record<ModuleType, string> = {
  vocabulary: "Лексика",
  grammar: "Грамматика",
  listening: "Аудирование",
  reading: "Чтение",
  writing: "Письмо",
  wordTest: "Тест по словам"
};

export interface VocabularyWord {
  id: string;
  german: string;
  russian: string;
  topic: string; // topicId
  level: LanguageLevel;
  consecutiveCorrectAnswers: number;
  lastTestedDate?: string; // ISO date string
  errorCount: number;
  exampleSentence?: string; // Optional, can be generated by AI
}

export interface ModuleProgress {
  score: number | null; // Percentage
  completed: boolean;
  lastAttemptDate?: string; // ISO date string
  attempts: number;
}

export interface TopicProgress {
  id: string; // e.g., "greetings"
  name: string; // e.g., "Приветствия"
  modules: Partial<Record<ModuleType, ModuleProgress>>;
  completed: boolean;
  custom?: boolean; // True if user-defined topic
}

export interface LevelProgress {
  topics: Record<string, TopicProgress>; // Keyed by topic ID
  completed: boolean;
}

export interface UserProfile {
  name?: string;
  preferredTopics?: string[];
}

export interface UserSettings {
  notificationsEnabled: boolean;
  lastActivityTimestamp?: number; // Unix timestamp
  darkMode?: boolean;
}

export interface GrammarWeaknessContext {
  level: LanguageLevel;
  topicId: string;
  topicName: string;
  moduleId?: ModuleType;
}

export interface GrammarWeaknessDetail {
  tag: string;
  count: number;
  lastEncounteredDate: string;
  exampleContexts: GrammarWeaknessContext[];
}

export interface UserData {
  currentLevel: LanguageLevel;
  currentTopicId?: string;
  profile: UserProfile;
  progress: Partial<Record<LanguageLevel, LevelProgress>>;
  vocabularyBank: VocabularyWord[];
  settings: UserSettings;
  customTopics: TopicProgress[];
  grammarWeaknesses?: Record<string, GrammarWeaknessDetail>;
}

// --- AI Generated Content Types (matches flows) ---

export interface AILessonVocabularyItem {
  german: string;
  russian: string;
  exampleSentence?: string;
}

// --- Grammar Exercise Types ---
export interface AIFillInTheBlanksQuestion {
  promptText: string;
  correctAnswers: string[];
  explanation?: string;
}

export interface AIFillInTheBlanksExercise {
  type: "fillInTheBlanks";
  instructions: string;
  questions: AIFillInTheBlanksQuestion[];
}

export interface AIMultipleChoiceQuestion {
  questionText: string;
  options: string[];
  correctAnswer: string;
  explanation?: string;
}

export interface AIMultipleChoiceExercise {
  type: "multipleChoice";
  instructions: string;
  questions: AIMultipleChoiceQuestion[];
}

export interface AISentenceConstructionTask {
  words: string[];
  possibleCorrectSentences: string[];
  explanation?: string;
}

export interface AISentenceConstructionExercise {
  type: "sentenceConstruction";
  instructions: string;
  tasks: AISentenceConstructionTask[];
}

export type AIGrammarExercise =
  | AIFillInTheBlanksExercise
  | AIMultipleChoiceExercise
  | AISentenceConstructionExercise;

// --- Standard Listening ---
export interface AILessonListeningExercise {
  script: string;
  questions: string[]; // Open-ended questions
}

// --- Interactive Vocabulary Exercise Types ---
export interface AIMatchingPair {
  german: string;
  russian: string;
}
export interface AIMatchingExercise {
  type: "matching";
  instructions: string;
  pairs: AIMatchingPair[];
  germanDistractors?: string[];
  russianDistractors?: string[];
}

export interface AIAudioQuizItem {
  germanPhraseToSpeak: string;
  options: string[]; // Russian translations
  correctAnswer: string; // One of the options
  explanation?: string;
}
export interface AIAudioQuizExercise {
  type: "audioQuiz";
  instructions: string;
  items: AIAudioQuizItem[];
}

// --- Common Interactive Exercise Types for Listening/Reading ---
export interface AIComprehensionMQ_Question {
  questionText: string;
  options: string[];
  correctAnswer: string;
  explanation?: string;
}
export interface AIComprehensionMultipleChoiceExercise {
  type: "comprehensionMultipleChoice";
  instructions: string;
  questions: AIComprehensionMQ_Question[];
}

export interface AITrueFalseStatement {
  statement: string;
  isTrue: boolean;
  explanation?: string;
}
export interface AITrueFalseExercise {
  type: "trueFalse";
  instructions: string;
  statements: AITrueFalseStatement[];
}

export interface AISequencingExercise {
  type: "sequencing";
  instructions: string;
  shuffledItems: string[];
  correctOrder: string[];
}

// --- Main Lesson Content Structure ---
export interface AILessonContent {
  lessonTitle: string;
  vocabulary: AILessonVocabularyItem[];
  grammarExplanation: string;

  grammarFillInTheBlanks?: AIFillInTheBlanksExercise;
  grammarMultipleChoice?: AIMultipleChoiceExercise;
  grammarSentenceConstruction?: AISentenceConstructionExercise;

  listeningExercise: AILessonListeningExercise;
  readingPassage: string;
  readingQuestions: string[];
  writingPrompt: string;

  interactiveMatchingExercise?: AIMatchingExercise;
  interactiveAudioQuizExercise?: AIAudioQuizExercise;

  interactiveListeningMCQ?: AIComprehensionMultipleChoiceExercise;
  interactiveListeningTrueFalse?: AITrueFalseExercise;
  interactiveListeningSequencing?: AISequencingExercise;

  interactiveReadingMCQ?: AIComprehensionMultipleChoiceExercise;
  interactiveReadingTrueFalse?: AITrueFalseExercise;
  interactiveReadingSequencing?: AISequencingExercise;
}

export interface WritingEvaluationDetails {
  taskAchievement?: string; // Оценка выполнения задания. ДОЛЖНО БЫТЬ НА РУССКОМ, ОЧЕНЬ КРАТКО
  coherenceAndCohesion?: string; // Оценка связности и логичности текста. ДОЛЖНО БЫТЬ НА РУССКОМ, КРАТКО
  lexicalResource?: string; // Оценка использования лексики. ДОЛЖНО БЫТЬ НА РУССКОМ, КРАТКО
  grammaticalAccuracy?: string; // Оценка грамматической правильности. ДОЛЖНО БЫТЬ НА РУССКОМ, КРАТКО
  overallFeedback: string; // Общее заключение и ключевые рекомендации. ДОЛЖНО БЫТЬ НА РУССКОМ, 1-2 ПРЕДЛОЖЕНИЯ
  suggestedImprovements?: string[]; // Конкретные предложения по улучшению. НА РУССКОМ
}

export interface ErrorExplanation {
  generalExplanation: string; // Общее объяснение типа ошибки на русском языке. Должно быть четким и по существу.
  specificExample?: string; // Конкретный пример из ответа пользователя, ВЫДЕЛЯЮЩИЙ ошибку (если применимо и если ошибка не во всем ответе).
  correctionExample?: string; // Пример исправления для ОШИБОЧНОГО ФРАГМЕНТА ответа пользователя (если применимо), а не полный правильный ответ. Полный ответ указывается в поле 'suggestedCorrection'.
  theoryReference?: string; // Краткое упоминание соответствующего грамматического правила или лексического нюанса на русском языке (если применимо, например, 'Предлог 'mit' требует Dativ').
}


export interface AIEvaluationResult {
  evaluation: string; // Краткий общий вывод на русском языке. Для письма это будет writingDetails.overallFeedback. Для других модулей – основная мысль оценки (например, "Верно!" или "Не совсем точно, есть ошибка в употреблении слова").
  isCorrect: boolean; // Whether the user response is correct or not. For writing, true if the text is generally understandable and addresses the prompt adequately for the level.
  suggestedCorrection?: string; // ПОЛНЫЙ предлагаемый правильный ответ на русском языке, если ответ пользователя был коротким и неверным, или ключевые исправления. Для письма это может быть исправленная версия текста.
  grammarErrorTags?: string[]; // Specific grammar points the user made errors on (e.g., "akkusativ_prepositions", "verb_conjugation_modal").
  writingDetails?: WritingEvaluationDetails;
  errorExplanationDetails?: ErrorExplanation;
}


export interface AIRecommendedLesson {
  topic: string;
  modules: string[];
  reasoning: string;
}

export interface DefaultTopicDefinition {
  id: string;
  name: string;
  /**
   * Optional list of vocabulary items for this topic.
   * If provided, the AI will be instructed to primarily use these words
   * for the lesson's vocabulary section, generating example sentences if needed,
   * and supplementing the list to reach 14-20 items if this list is shorter.
   * If not provided, AI generates vocabulary based on the topic name and level.
   */
  fallbackVocabulary?: AILessonVocabularyItem[];
}

// Default Topics (Considered "Mandatory Lexical Topics")
export const DEFAULT_TOPICS: Record<LanguageLevel, DefaultTopicDefinition[]> = {
  A0: [
    {
      id: "a0_greetings_farewells", name: "Основные приветствия и прощания",
      fallbackVocabulary: [
        { german: "Hallo", russian: "Привет", exampleSentence: "Hallo, wie geht's?" },
        { german: "Guten Morgen", russian: "Доброе утро", exampleSentence: "Guten Morgen, Herr Schmidt." },
        { german: "Guten Tag", russian: "Добрый день", exampleSentence: "Guten Tag, Frau Meier." },
        { german: "Guten Abend", russian: "Добрый вечер", exampleSentence: "Guten Abend zusammen." },
        { german: "Tschüss", russian: "Пока", exampleSentence: "Tschüss, bis bald!" },
        { german: "Auf Wiedersehen", russian: "До свидания", exampleSentence: "Auf Wiedersehen, meine Damen und Herren." },
        { german: "Bitte", russian: "Пожалуйста / Прошу", exampleSentence: "Kann ich bitte Wasser haben?" },
        { german: "Danke", russian: "Спасибо", exampleSentence: "Danke für Ihre Hilfe." },
        { german: "Ja", russian: "Да", exampleSentence: "Ja, das stimmt." },
        { german: "Nein", russian: "Нет", exampleSentence: "Nein, das ist nicht richtig." },
      ]
    },
    {
      id: "a0_numbers_dates", name: "Числа и даты",
      fallbackVocabulary: [
        { german: "eins", russian: "один", exampleSentence: "Ich habe eins." },
        { german: "zwei", russian: "два", exampleSentence: "Zwei Äpfel, bitte." },
        { german: "drei", russian: "три", exampleSentence: "Drei Kinder spielen." },
        { german: "vier", russian: "четыре" },
        { german: "fünf", russian: "пять" },
        { german: "Montag", russian: "понедельник", exampleSentence: "Heute ist Montag." },
        { german: "Dienstag", russian: "вторник" },
        { german: "Januar", russian: "январь", exampleSentence: "Im Januar ist es kalt." },
        { german: "Februar", russian: "февраль" },
      ]
    },
    {
      id: "a0_family_friends", name: "Семья и друзья",
      fallbackVocabulary: [
        { german: "die Familie", russian: "семья", exampleSentence: "Das ist meine Familie." },
        { german: "die Mutter", russian: "мама", exampleSentence: "Meine Mutter kocht." },
        { german: "der Vater", russian: "папа", exampleSentence: "Mein Vater liest." },
        { german: "der Bruder", russian: "брат", exampleSentence: "Ich habe einen Bruder." },
        { german: "die Schwester", russian: "сестра", exampleSentence: "Meine Schwester singt." },
        { german: "der Freund", russian: "друг (м.р.)", exampleSentence: "Das ist mein Freund." },
        { german: "die Freundin", russian: "подруга", exampleSentence: "Sie ist meine Freundin." },
      ]
    },
    {
      id: "a0_colors", name: "Цвета",
      fallbackVocabulary: [
        { german: "rot", russian: "красный", exampleSentence: "Der Apfel ist rot." },
        { german: "blau", russian: "синий", exampleSentence: "Der Himmel ist blau." },
        { german: "grün", russian: "зеленый", exampleSentence: "Das Gras ist grün." },
        { german: "gelb", russian: "желтый", exampleSentence: "Die Sonne ist gelb." },
        { german: "schwarz", russian: "черный", exampleSentence: "Die Katze ist schwarz." },
        { german: "weiß", russian: "белый", exampleSentence: "Der Schnee ist weiß." },
        { german: "die Farbe", russian: "цвет", exampleSentence: "Was ist deine Lieblingsfarbe?" },
      ]
    },
    {
      id: "a0_body_parts", name: "Части тела",
      fallbackVocabulary: [
        { german: "der Kopf", russian: "голова", exampleSentence: "Das ist mein Kopf." },
        { german: "der Arm", russian: "рука (от плеча до кисти)", exampleSentence: "Mein Arm tut weh." },
        { german: "das Bein", russian: "нога (от бедра до стопы)", exampleSentence: "Ich habe zwei Beine." },
        { german: "die Hand", russian: "рука (кисть)", exampleSentence: "Gib mir deine Hand." },
        { german: "der Fuß", russian: "стопа", exampleSentence: "Mein Fuß ist groß." },
        { german: "das Auge", russian: "глаз", exampleSentence: "Blaue Augen." },
        { german: "die Nase", russian: "нос", exampleSentence: "Eine kleine Nase." },
      ]
    },
    {
      id: "a0_home_objects", name: "Дом и предметы в доме",
      fallbackVocabulary: [
        { german: "das Haus", russian: "дом", exampleSentence: "Wir wohnen in einem Haus." },
        { german: "der Tisch", russian: "стол", exampleSentence: "Das Buch liegt auf dem Tisch." },
        { german: "der Stuhl", russian: "стул", exampleSentence: "Setz dich auf den Stuhl." },
        { german: "das Bett", russian: "кровать", exampleSentence: "Ich gehe ins Bett." },
        { german: "die Tür", russian: "дверь", exampleSentence: "Die Tür ist zu." },
        { german: "das Fenster", russian: "окно", exampleSentence: "Mach das Fenster auf." },
        { german: "die Lampe", russian: "лампа", exampleSentence: "Die Lampe ist an." },
      ]
    },
    {
      id: "a0_food_drinks", name: "Продукты питания и напитки",
      fallbackVocabulary: [
        { german: "das Brot", russian: "хлеб", exampleSentence: "Ich esse Brot mit Käse." },
        { german: "die Milch", russian: "молоко", exampleSentence: "Ich trinke Milch." },
        { german: "das Wasser", russian: "вода", exampleSentence: "Ein Glas Wasser, bitte." },
        { german: "der Apfel", russian: "яблоко", exampleSentence: "Der Apfel ist süß." },
        { german: "die Banane", russian: "банан", exampleSentence: "Affen mögen Bananen." },
        { german: "der Käse", russian: "сыр", exampleSentence: "Käse schmeckt gut." },
        { german: "das Ei", russian: "яйцо", exampleSentence: "Ich koche ein Ei." },
      ]
    },
    {
      id: "a0_clothing", name: "Одежда",
      fallbackVocabulary: [
        { german: "das Hemd", russian: "рубашка", exampleSentence: "Er trägt ein blaues Hemd." },
        { german: "die Hose", russian: "брюки, штаны", exampleSentence: "Meine Hose ist neu." },
        { german: "der Schuh", russian: "ботинок, туфля", exampleSentence: "Ich brauche neue Schuhe." },
        { german: "die Jacke", russian: "куртка", exampleSentence: "Zieh deine Jacke an." },
        { german: "der Rock", russian: "юбка", exampleSentence: "Sie trägt einen roten Rock." },
        { german: "das T-Shirt", russian: "футболка", exampleSentence: "Ein weißes T-Shirt." },
        { german: "der Hut", russian: "шляпа", exampleSentence: "Ein großer Hut." },
      ]
    },
    {
      id: "a0_simple_motion_verbs", name: "Простые глаголы движения",
      fallbackVocabulary: [
        { german: "gehen", russian: "идти", exampleSentence: "Ich gehe nach Hause." },
        { german: "kommen", russian: "приходить", exampleSentence: "Wann kommst du?" },
        { german: "laufen", russian: "бежать", exampleSentence: "Die Kinder laufen schnell." },
        { german: "stehen", russian: "стоять", exampleSentence: "Er steht an der Tür." },
        { german: "sitzen", russian: "сидеть", exampleSentence: "Wir sitzen auf dem Sofa." },
        { german: "fahren", russian: "ехать", exampleSentence: "Ich fahre mit dem Auto." },
        { german: "fliegen", russian: "летать", exampleSentence: "Vögel können fliegen." },
      ]
    },
    {
      id: "a0_simple_nouns_city_school", name: "Простые существительные (город, школа)",
      fallbackVocabulary: [
        { german: "die Stadt", russian: "город", exampleSentence: "Berlin ist eine große Stadt." },
        { german: "die Schule", russian: "школа", exampleSentence: "Die Kinder gehen in die Schule." },
        { german: "das Buch", russian: "книга", exampleSentence: "Ich lese ein Buch." },
        { german: "der Stift", russian: "ручка, карандаш", exampleSentence: "Hast du einen Stift?" },
        { german: "der Lehrer", russian: "учитель", exampleSentence: "Der Lehrer erklärt die Aufgabe." },
        { german: "die Lehrerin", russian: "учительница", exampleSentence: "Die Lehrerin ist nett." },
        { german: "das Auto", russian: "машина", exampleSentence: "Mein Auto ist rot." },
      ]
    }
  ],
  A1: [
    { id: "a1_work_professions", name: "Работа и профессии" },
    { id: "a1_travel_transport", name: "Путешествия и транспорт" },
    { id: "a1_time_schedule", name: "Время и расписание" },
    { id: "a1_hobbies_interests", name: "Хобби и увлечения" },
    { id: "a1_shops_shopping", name: "Магазины и покупки" },
    { id: "a1_emotions_states", name: "Простые эмоции и состояния" },
    { id: "a1_simple_adjectives", name: "Простые прилагательные" }
  ],
  A2: [
    { id: "a2_health_medical_care", name: "Здоровье и медицинская помощь" },
    { id: "a2_weather_nature", name: "Погода и природа" },
    { id: "a2_education_studies", name: "Образование и учеба" },
    { id: "a2_relationships_family", name: "Отношения и семья (углубл.)" },
    { id: "a2_city_surroundings", name: "Город и окрестности" },
    { id: "a2_simple_phrasal_verbs", name: "Простые фразовые глаголы" }
  ],
  B1: [
    { id: "b1_work_career", name: "Работа и карьера" },
    { id: "b1_travel_culture", name: "Путешествия и культура" },
    { id: "b1_politics_society", name: "Политика и общество" },
    { id: "b1_technology", name: "Технологии" },
    { id: "b1_ecology_environment", name: "Экология и окружающая среда" },
    { id: "b1_holidays_traditions", name: "Праздники и традиции" }
  ],
  B2: [
    { id: "b2_science_technology", name: "Наука и техника" },
    { id: "b2_art_culture", name: "Искусство и культура" },
    { id: "b2_education_science", name: "Образование и наука" },
    { id: "b2_politics_economics", name: "Политика и экономика" },
    { id: "b2_social_issues", name: "Социальные проблемы" }
  ],
  C1: [
    { id: "c1_abstract_topics", name: "Абстрактные темы" },
    { id: "c1_professional_vocabulary", name: "Профессиональная лексика" },
    { id: "c1_discussion_topics", name: "Дискуссионные темы" },
    { id: "c1_philosophy_psychology", name: "Философия и психология" }
  ],
  C2: [
    { id: "c2_expert_terminology", name: "Экспертная терминология" },
    { id: "c2_rare_stylized_expressions", name: "Редкие и высоко стилизованные выражения" },
    { id: "c2_cultural_historical_references", name: "Культурные и исторические ссылки" }
  ],
};

// Mandatory Grammar Topics per Level
export const MANDATORY_GRAMMAR_TOPICS: Record<LanguageLevel, string[]> = {
  A0: [
    "Алфавит и фонетика (произношение букв, ударения)",
    "Личные местоимения (ich, du, er, sie, es, wir, ihr, sie, Sie)",
    "Глагол sein в настоящем времени (ich bin, du bist…)",
    "Глагол haben в настоящем времени",
    "Простое повествовательное предложение (SVO)",
    "Простое вопросительное предложение (Ja/Nein-Fragen)",
    "Числа (0–100)",
    "Простые артикли (der, die, das – определённые)",
    "Простая лексика: дни недели, цвета, семья, еда, время"
  ],
  A1: [
    "Существительные и артикли (определённый / неопределённый)",
    "Множественное число существительных",
    "Притяжательные местоимения (mein, dein, sein…)",
    "Указательные местоимения (dieser, diese, dieses)",
    "Вопросительные слова (wer, was, wo, wann, wie, warum…)",
    "Настоящее время (Präsens) слабых и сильных глаголов",
    "Модальные глаголы (können, müssen, wollen, dürfen, sollen, mögen)",
    "Глаголы с отделяемыми приставками (aufstehen, anrufen…)",
    "Порядок слов в утвердительных, вопросительных и отрицательных предложениях",
    "Инверсия (сначала обстоятельство, потом подлежащее)",
    "Отрицание с nicht и kein",
    "Imperativ (повелительное наклонение) — вежливый и неформальный",
    "Время в часах (Uhrzeit)",
    "Именительный падеж (Nominativ)",
    "Винительный падеж (Akkusativ) (Ich sehe den Mann.)",
    "Простые предлоги с Akkusativ (für, durch, ohne, um…)"
  ],
  A2: [
    "Притяжательные местоимения во всех падежах",
    "Вопросительные местоимения в других падежах (Wem? Wen?)",
    "Относительные местоимения (Relativsätze mit der/die/das)",
    "Наречия частотности и времени (oft, selten, manchmal…)",
    "Наречия порядка и места (zuerst, dann, dort…)",
    "Прошедшее время: Perfekt (Ich habe gegessen, Ich bin gegangen…)",
    "Слово порядок при использовании Perfekt",
    "Präteritum некоторых глаголов (sein, haben, modal verbs)",
    "Начало освоения пассивного залога в Perfekt (wird… gemacht)",
    "Дательный падеж (Dativ)",
    "Предлоги с Dativ (mit, nach, seit, bei, von, zu…)",
    "Предлоги с Akkusativ und Dativ (an, auf, in, über…)",
    "Временные конструкции (seit, vor, in, bis)"
  ],
  B1: [
    "Относительные предложения с разными падежами",
    "Условные предложения типа I (Wenn-Sätze Typ 1)",
    "Конъюнкции: weil, obwohl, wenn, dass, damit, während",
    "Союзы и порядок слов",
    "Причастия I и II в качестве прилагательных",
    "Präteritum регулярно и часто употребляемых глаголов",
    "Различие между Präteritum и Perfekt",
    "Пассивный залог в Präsens, Präteritum и Perfekt",
    "Futur I (ich werde arbeiten)",
    "Начало Futur II (ich werde gearbeitet haben)",
    "Специальные конструкции: Es gibt / es gab",
    "Indirekte Rede mit Konjunktiv I (начало)",
    "Verben mit Präpositionen (sich freuen auf/über, warten auf)"
  ],
  B2: [
    "Konjunktiv I в косвенной речи",
    "Konjunktiv II: нереальные условные предложения (würde + Infinitiv)",
    "Konjunktiv II с Präteritum сильных глаголов (hätte, wäre, könnte, müsste)",
    "Futur II",
    "Страдательный залог (Passiv) во всех временах, в том числе с модальными глаголами",
    "Zustandspassiv (sein + Partizip II)",
    "Vorgangspassiv (werden + Partizip II)",
    "Условные предложения всех типов (Typ 1–3)",
    "Употребление инфинитивных конструкций с zu",
    "Номинализация (der Besuch → besuchen, das Lesen → lesen)",
    "Префиксы и суффиксы образования слов",
    "Сложносочинённые и сложноподчинённые предложения с Nebensätzen",
    "Рекурсия придаточных предложений"
  ],
  C1: [
    "Продвинутое использование Konjunktiv I и II",
    "Высокая частота Passiv и Umschreibungen",
    "Различия в значении при смене порядка слов",
    "Stilistische Unterschiede: Umgangssprache vs. Schriftsprache",
    "Erweiterter Infinitiv mit zu (um zu…, ohne zu…, anstatt zu…)",
    "Partizipialkonstruktionen (z.B. Von der Polizei verfolgt, rannte er weg…)",
    "Сложные причастные обороты",
    "Nominalstil vs. Verbalstil (научный стиль)",
    "Разнообразные способы выражения причины, цели, следствия"
  ],
  C2: [
    "Метафорические и идиоматические обороты",
    "Структуры высокого уровня сложности:",
    "Инверсия ради акцента: Kaum hatte er das Haus verlassen, da…",
    "Eliptische формы (пропуски глаголов/подлежащих)",
    "Dialektные и региональные формы (опционально)",
    "Структуры со сложными глаголами и вводными конструкциями",
    "Стилистические оттенки Konjunktiv I в официальных документах",
    "Академическая лексика и синтаксис",
    "Юридические и научные формулировки",
    "Перевод и переформулировка сложных идей",
    "Все времена и залоги, включая сложные и редкие формы (например, Zustandspassiv)",
    "Все формы и случаи употребления Konjunktiv I и II, включая Ersatzformen",
    "Сложные синтаксические конструкции, периоды",
    "Употребление модальных частиц для выражения оттенков значения (doch, ja, eben, halt, wohl и т.д.)",
    "Стилистически окрашенная лексика и грамматика",
    "Особенности научного и делового стиля",
    "Фразеология и идиоматика на продвинутом уровне",
    "Различия между письменной и устной речью на высоком уровне",
    "Тонкости словообразования (суффиксы, префиксы, сложные слова)",
    "Сложные случаи предложного управления и рекций глаголов"
  ],
};

    